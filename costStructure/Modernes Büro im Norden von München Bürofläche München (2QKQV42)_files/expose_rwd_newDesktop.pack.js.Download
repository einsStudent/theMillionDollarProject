IwAG.Common=IwAG.Common||{};IwAG.Common.Remember=function(c){var a=null,b=function(a){var b=0,e=true,f="IW-MerkerEstate",c="add",d="rem",g=5;_idForTracking=null,$controls=null,_initialize=function(d,g){if(d)b=d;if(g===true)e=false;else{var c=a.cookie(f);if(c&&c.length>10&&c.indexOf(",")<0)e=false}$controls=a(".js-remember");$controls.off("click",_clickHandler).on("click",_clickHandler);document.addEventListener("updateRememberButtons",function(){$controls=a(".js-remember");$controls.off("click",_clickHandler).on("click",_clickHandler)})},_clickHandler=function(c){a.cancelEvent(c);var b=a(c.target);if(b.data("estateid")===undefined)b=b.closest(".js-remember[data-estateid]");if(IwAG.Expose&&IwAG.Expose.getInstance&&IwAG.Expose.getInstance().HasNotes()){_showConfirmModal(b.data("estateid"),b.data("guid"),b.data("action"),function(){IwAG.Expose&&IwAG.Expose.getInstance().ReloadNotes()});return}_update(b.data("estateid"),b.data("guid"),b.data("action"))},_showConfirmModal=function(d,c,b,a){IwAG.Base.getInstance().openNewModalDialog({content:'<p class="padding_bottom_30">Wenn Sie dieses Exposé von Ihrem Merkzettel entfernen, gehen alle dazu gemachten Notizen verloren.</p>',headline:"Exposé vom Merkzettel entfernen",addCloseButton:true,footer:'<button class="btn_01 ci_color margin_bottom_10" data-remodal-action="confirm" class="remodal-confirm">Entfernen</button>                                  <button class="btn_01 lightgray iw_right" data-remodal-action="cancel" class="remodal-cancel">Abbrechen</button>',widthClass:"single_width",onClosing:function(e){e.reason&&e.reason==="confirmation"&&_update(d,c,b,a)}})},_tealiumTracking=function(f,b){var a="";switch(f){case c:a="merken_hinzugefuegt";break;case d:a="merken_entfernt"}var e="merken_zettel";if(b)e=b;typeof utag!=="undefined"&&utag.link({event_category:"merken",event_action:a,event_label:e})},_trackOnLoginSuccess=function(d){a.cancelEvent(d);if(_idForTracking&&_idForTracking!=null){var b=$controls.filter("[data-estateid="+_idForTracking+"]");_tealiumTracking(c,b.data("tealiumeventlabel"));_idForTracking=null}},_validateAction=function(h,l,k){var i=a.cookie(f),e=i?i.split(","):[],j=i&&i.indexOf("LoggedOut")>-1;switch(k){case c:if(e.indexOf(h.toString())>-1)return false;if(j||g<=e.length){_initLogin();IwAG.Vars.idToRemember=h;_idForTracking=h;return false}e.push(h.toString());b++;break;case d:if(e.indexOf(h.toString())<0)return false;e.remove(h.toString());b--}a.cookie(f,e.join(","),{expires:90,path:"/"});return true},_updateUiControls=function(g,f){a("span.HeaderMerkerLinkCount").text(b>0?String.Format("({0})",b):"");var e=$controls.filter("[data-estateid="+g+"]");a(document).trigger("DisableSuchauftragNotification");switch(f){case c:e.data("action",d).addClass("active");e.each(function(){if(this.text!=undefined&&this.text.toLowerCase().indexOf("merken")>-1)this.text="Gemerkt";if(this.title)this.title="Entfernt dieses Objekt vom Merkzettel."});a(document).trigger("ShowMerkenInfo",[e.data("estateid")]);break;case d:e.data("action",c).removeClass("active");e.each(function(){if(this.text!=undefined&&this.text.toLowerCase().indexOf("gemerkt")>-1)this.text="Merken";if(this.title)this.title="Fügt dieses Objekt zum Merkzettel hinzu."});a(document).trigger("HideMerkenInfo",[e.data("estateid")])}_tealiumTracking(f,e.data("tealiumeventlabel"));a.ajax({type:"POST",url:IwAG.Vars.IWhost+"_common/userprofileclient/userprofileclient.asmx/RememberExpose",data:'{ estateId:"'+g+'", add: "'+(f=="add"?"true":"false")+'" }',contentType:"application/json; charset=utf-8",dataType:"json"})},_update=function(b,c,a,d){if(!e){_apiCall(b,c,a,d);return}_validateAction(b,c,a)&&_updateUiControls(b,a)},_apiCall=function(d,f,e,c){a.ajax({type:"POST",url:"/mvcroot/user/setrememberobject",contentType:"application/json; charset=utf-8",data:"{ 'id': "+d+", 'guid': '"+f+"'}",dataType:"json",success:function(a){b=a;_updateUiControls(d,e);c&&c()}})},_initLogin=function(){a(document).off("onLoginSuccess",_trackOnLoginSuccess).on("onLoginSuccess",_trackOnLoginSuccess);a("[data-remodal-id='dev-modal-custom-auth']").remodal().open("dev-modal-custom-auth~both-login-remember")};return{Initialize:function(b,a){_initialize(b,a)},Update:function(b,e,a,d){var c=$controls.filter("[data-estateid="+b+"]");c.data("action")===a&&_update(b,e,a,d)},UpdateUiControls:function(a,d,c){if(b==a)return;b=a;_updateUiControls(d,c)}}};return{getInstance:function(){if(!a)a=new b(c);return a}}}(IwAG.$);(function(a){a(function(){a(document).on("initRemember",function(){IwAG.Common.Remember.getInstance().Initialize(0,IwAG.Vars.IsLoggedIn)})})})(IwAG.$);IwAG.Expose=function(d,c){var a=null,b=function(b,e){var Z=true,q=(e.location.protocol+"//"+e.location.host+e.location.pathname).replace(/\/vorschau\/?/i,""),d="display_none",h=0,m=false,fb=false,L=0,Cb=0,tb=0,O=0,yb=0,S=false,ab=null,Q={},g={EstateId:"",EstateGuid:"",OnlineId:""},qb=1,sb=1,ob=null,Yb=null,Wb=null,Jb=null,f=null,c=null,T=null,pb=null,db=null,J=null,kb=null,x=null,B=null,y=null,p=null,z=null,Ab=null,eb=null,Eb=null,zb=null,Tb=null,Ub=null,W=null,H=null,V=null,A=null,Ib=null,k=null,w=null,j=null,l=null,R=null,Hb=null,cb=null,ub=null,u=null,D=null,s=null,U=null,F=null,v=null,M=null,t=null,vb=null,wb=null,Y=null,Gb=null,mb=null,I=null,C=null,X=false,N=null,i={slideShow:false,startSlideshow:false,initializeAllBySelf:false},hb=function(f){if(q.indexOf("?")>0)q=q.substr(0,q.indexOf("?"));i=b.extend(i,f);IwAG.Header&&typeof IwAG.Header.getInstance==="function"&&IwAG.Header.getInstance().DisableFixedHeader(true);var j=b.Event("disableFixedHeader");b(e).trigger(j);m=IwAG.Base.getInstance().isSDevice();fb=IwAG.Base.getInstance().isMDevice();c=b("#statusBar");T=b("#statusAnchor");vb=b("#btn_kapAnl");wb=b("#txt_teaserKapAnl");Y=b("#kapAnlForm");L=c.height();if(m){c.show();b("#statusContact",c).text("Kontakt")}else c.hide();if(!T||!c)Z=false;var h=Sb("csn"),d=e.location.hash==="#weiterempfehlen";Tb=b("#carouselContainer,#noImgContainer");Ub=b("#divMainStage");W=b("#divPreise");H=b("#divImmobilie");V=b("#divLageinfos");A=b("#divAnbieter");Ib=b("#divEnergie");bb();x=b("#aUebersicht",c);B=b("#aPreise",c);y=b("#aImmobilie",c);p=b("#aLageinfos",c);z=b("#aAnbieter",c);Ab=b("#aAnbieterLogo");eb=b(".js-OpenFraud");Hb=b("#divFraud");cb=b("#recommendForm");t=b("#notificationPopup");Gb=b(".js-CloseContactForm");D=b("#furtherResultData",A);s=b("#anbieterKontaktData",A);U=b(".vrweb_a",H);db=b("#contactData");db.hide();pb=b(".js-showPhonenumbers");F=b("#moreEnergyLink");v=b("#lessEnergyLink");mb=b(".js-relocationCostButton");I=b("#divRelocationCostCalculator");C=b("#divRelocationCostContainer");if(F!=undefined){M=b(".energieausweise2");M.hide();v.hide();F.on("click",function(){M.show();F.hide();v.show()});v.on("click",function(){M.hide();F.show();v.hide();n(Ib,v)})}g={EstateId:parseInt(b("#EstateId").val()),EstateGuid:b("#EstateGuid").val(),OnlineId:b("#OnlineId").val()};o(h);b(document).scrollTop()>0&&a.InitScrollTop();IwAG.Base.getInstance().addAsyncLoaded(Vb);IwAG.Base.getInstance().addAsyncLoaded(Xb);Lb();b(".text_adbox").length&&b(".text_adbox").each(function(){b(this).children().length==1&&b(b(this).children()[0]).is("ul")&&!b(b(this).children()[0]).children().length&&b(this).remove()});IwAG.Base.getInstance().addAsyncLoaded(Fb);d&&xb();b(".section_content").each(function(){var a=b(this).children(":first");a.is("ul")&&a.addClass("first_ul")});if(!i.initializeAllBySelf)return;if(!m&&i.panorama&&!i.liveEvent)i.startWithPanorama=true;if(i.slideShow)i.startSlideshow=IwAG.Base.getURLParam(e.location.href,"slide")=="1"||IwAG.Base.getURLParam(e.location.href,"bc")=="2";IwAG.Expose.Image.getInstance().Initialize(i);if(typeof Panorama==="function")Yb=new Panorama(i,b("#panoramaArea"),b(".js-mediaTabBar"));if(typeof MediaBar==="function")Wb=new MediaBar(i,b("#thumbsButton"),b(".js-mediaTabBar"));if(IwAG.Vars.youtube)Jb=new Youtube(b("#ytube"));N=new IwAG.Expose.Kontaktanfrage(b,e,IwAG.Vars)},Fb=function(){Eb=b("#aRecommend,#aFooterRecommend");x.off().on("click",function(a){o("1",a,true)});B.off().on("click",function(a){o("2",a,true)});y.off().on("click",function(a){o("3",a,true)});p.off().on("click",function(a){o("4",a,true)});z.off().on("click",function(a){o("5",a,true)});Ab.off().on("click",function(a){o("5",a,true)});eb.off().on("click",function(){G(Hb)});Eb.off().on("click",xb);pb.off().on("click",function(){db.show()});vb.off().on("click",function(c){c.preventDefault();var b="https://kapitalanlage.immowelt.de/amount?sum=",a=wb.val();if(a){a=a.replace(".","");if(a.indexOf(",")!==-1)a=a.substring(0,a.indexOf(","));Y.attr("action",b+a);Y.submit()}else e.open("https://kapitalanlage.immowelt.de/","_blank")});Gb.off().on("click",function(){var a=b(this);a.parents(".section").addClass(d);document.documentElement.style.position="static"});mb.on("click",function(){I=C.find("#divRelocationCostCalculator");if(!I.length&&!X){X=true;b.ajax({type:"POST",url:C.data("url"),data:{link:C.data("param")},success:function(a){C.append(a)},error:function(){X=false}})}else I.show()});ub.on("click",function(){n(cb)});b(e).on("skyscraperRendered",function(){var d=document.getElementById("div-gpt-ad-1426592241524-0");if(!d)return 0;var c=d.getElementsByTagName("iframe");if(!c||!c.length)return 0;try{var e=c[0].contentDocument||c[0].contentWindow.document,a=e.getElementsByTagName("style"),g=document.head||document.getElementsByTagName("head")[0];if(!a.length)return 1;for(var b=0,h=a.length;b<h;b++)if(/[\s\S]*body[\s\S]*\.anchornav_wrapper[\s\S]*\.expose .anchornav ul li a[\s\S]*\.expose .anchornav ul li a.current[\s\S]*/i.test(a[b].innerText)||/[\s\S]*body[\s\S]*\.anchornav_wrapper[\s\S]*\.expose .anchornav ul li a[\s\S]*\.expose .anchornav ul li a.current[\s\S]*/i.test(a[b].innerHTML)){a[b].setAttribute("type","text/css");var f=g.appendChild(a[b]);f.innerText+=" ";return 3}}catch(i){return 1}return 4});nb()},nb=function(){var a=h<Cb;if(m){U.hide();c.show();b("#statusContact",c).text("Kontakt")}else if(fb){U.hide();a&&c.hide();b("#statusContact",c).text("Anbieter kontaktieren")}else{U.show();a&&c.hide();b("#statusContact",c).text("Anbieter kontaktieren")}},Vb=function(){k=b("#divNotes");ub=b("#aSubmitRecommend");b(".js-log-phoneCall").off("click",E).on("click",E);J=b("#showPhoneNumbersAnfrage");if(!J.hasClass(d)){kb=b("#phoneNumbersAnfrage");J.off().on("click",function(a){b.cancelEvent(a);kb.removeClass(d);J.addClass(d);E();ib()})}zb=b("#btnContactSend");g={EstateId:parseInt(b("#EstateId").val()),EstateGuid:b("#EstateGuid").val(),OnlineId:b("#OnlineId").val(),GlobalObjectKey:b("#EstateGlobalObjectKey").val(),GlobalUserId:isNaN(b("#GlobalUserId").val())?0:b("#GlobalUserId").val()};eb=b(".js-OpenFraud");IwAG.Base.getInstance().addAsyncLoaded(Fb)},E=function(){b.ajax({type:"POST",url:q+"/LogTelefonCall",data:'{ estateguid: "'+g.EstateGuid+'", globalobjectkey: "'+g.GlobalObjectKey+'", globaluserid: '+g.GlobalUserId+" }",contentType:"application/json; charset=utf-8",success:function(a){IwAG.Base.asyncHtmlGet("formNotiz","estateguid="+g.EstateGuid,"getnotiz",e.location.pathname.substr(1));IwAG.Common.Remember.getInstance().UpdateUiControls(a.merkerCount,g.EstateId,"add")}})},Xb=function(h){var g=!h&&e.location.hash==="#notiz",f=function(){b("#aSaveNotiz",j).addClass("active")},a={callback:function(){j.slideDown("fast",function(){Ob(l)})}},c=null;w=b("#noteDisplay",k);j=b("#noteEdit",k);l=b("#Notizen_Description",j);l.on("keydown",f);R=b("#aCloseNotizen",k);R.on("click",Qb);b("#aSaveNotiz",j).on("click",function(a){c=l.val();if(a.target.className.indexOf("js-annotation-login")>-1){b("[data-remodal-id='dev-modal-custom-auth']").remodal().open("dev-modal-custom-auth~both-login-annotation");b(document).one("closed",'[data-remodal-id="dev-modal-custom-auth"]',function(a){gb(a,false);rb(a,false);l.val(c)})}});b("#aDeleteNote",w).on("click",rb);b(".js-display-notes").on("click",a,gb);if(g||e.location.hash==="#notiz")gb(a);else{k.addClass(d);w.removeClass(d);j.addClass(d)}w.length&&k.removeClass(d);b(document).off("onLoginSuccess",jb).on("onLoginSuccess",jb)},jb=function(c,a){b.cancelEvent(c);if(a&&a.Tracking&&a.Tracking.tracking.AnnotationSaved)typeof utag!=="undefined"&&utag.link({event_category:"notiz",event_action:"notiz_speichern_login"})},rb=function(d,c){b.cancelEvent(d);var a={estateguid:g.EstateGuid,estateid:b("#EstateId").val(),description:l.val()!==l.attr("placeholder")?l.val()||"":""};a.description="";l.val("");b("#formNotiz",k).data("hasnotes",false);b.ajax({type:"POST",url:e.location.pathname+"/deleteannotation",data:JSON.stringify(a),contentType:"application/json; charset=utf-8",dataType:"json",success:function(){(c===undefined||c)&&IwAG.Base.asyncHtmlGet("formNotiz","estateguid="+a.estateguid,"getnotiz",e.location.pathname.substr(1),"")}})},gb=function(e,c){c=c!==false;R.removeClass(d);k.removeClass(d);var a=e.data;if(!a)a=e;else b.cancelEvent(e);c&&(!j.is(":visible")||!j.isOnScreen())&&G(j);w.addClass(d);j.removeClass(d);c&&n(k,x);K("note");a&&a.callback&&a.callback();b.ajax({url:IwAG.Vars.IWMediahost+IwAG.Vars.autoSizeScript.substr(1),dataType:"script",complete:function(){typeof autosize=="function"&&autosize(l)}})},Qb=function(){if(a.HasNotes()){w.removeClass(d);j.addClass(d);R.addClass(d);return false}k.addClass(d);return false},G=function(c,f){var a=c.data&&c.data.container||c;if(a.hasClass("js-asyncBox")&&m)document.documentElement.style.position="fixed";if(u&&u.length&&a.hasClass("js-asyncBox")){u.addClass(d);u=null}var e=a.offset().top;if(a.hasClass(d)){a.removeClass(d);e=a.offset().top;a.addClass(d)}a.removeClass(d);!f&&b("html, body").animate({scrollTop:e-(m?0:L)},300,null,function(){S=false});u=a.hasClass("js-asyncBox")?a:u;b.cancelEvent(c)},xb=function(a){b.cancelEvent(a);G(cb);IwAG.Weiterempfehlen.getInstance().ShowCallback()},bb=function(){var a=L+40,b=W.length&&W.offset().top-a;tb=H.length&&H.offset().top-a;O=V.length&&V.offset().top-a;yb=A.length&&A.offset().top-a},r=function(c){var a="current";x.removeClass(a);B.removeClass(a);y.removeClass(a);p.removeClass(a);z.removeClass(a);c.addClass(a);var b=1;if(c==B)b=2;else if(c==y)b=3;else if(c==p)b=4;else if(c==z)b=5;K("scrolling",b)},P=function(c){if(!Z||S)return;ab=setTimeout(function(){ab=null},7e3);!T&&hb(IwAG.Vars.exposeConfig);Bb();var d=c&&c.currentTarget||e,a=d.pageYOffset,b=T.offset().top-L;if(h>=a)Pb(a,b);else Nb(a,b);h=a;bb();if(h>=yb)r(z);else if(h>=O&&p.length)r(p);else if(h>=tb)r(y);else if(h>=Cb)r(B);else r(x)},Nb=function(b,a){if(m)return;b>=a&&!c.is(":visible")&&c.slideDown(250)},Pb=function(b,a){if(m)return;if(b>=a&&!c.is(":visible"))c.slideDown(250);else b<a&&c.css("position")!="static"&&c.stop().hide()},o=function(c,d,a){b.cancelEvent(d);a;switch(c){case"1":n(b("#slider1_container"),x,-1);break;case"2":n(W,B);break;case"3":n(H,y);break;case"4":n(V,p);break;case"5":n(A,z)}},n=function(e,d,f){S=true;var a=0;if(e.length)a=e.offset().top-c.height()-(f||0);h=a;b("html, body").stop().animate({scrollTop:a},300,null,function(){S=false;P()});Bb();d&&r(d)},Bb=function(){var a="";if(typeof FurtherResultsDataUrlParameter!=="undefined")a=FurtherResultsDataUrlParameter;if(D&&D.length&&!Q.furtherResults&&h>=O){Q.furtherResults=true;b.ajax({type:"POST",url:q+"/FurtherResultsData"+a,data:'{ estateguid: "'+g.EstateGuid+'" }',contentType:"application/json; charset=utf-8",success:function(f){if(f&&f.length>0){D.html(f);var c=b("#aehnlicheObjekteCarousel",D),a="disabled";c.on("initialized.owl.carousel",function(c){if(c.item.count<=c.page.size){b(".owl-next").addClass(d);b(".owl-prev").addClass(d)}else b(".owl-prev").addClass(a)});c.owlCarousel({nav:true,slideSpeed:300,paginationSpeed:400,dotsEach:false,margin:20,lazyLoad:true,responsive:{0:{items:1},461:{items:2,slideBy:2,dots:false},761:{items:3,slideBy:3,dots:false},981:{items:3,slideBy:3,dots:false}}});c.on("changed.owl.carousel",function(c){if(c.item.count<=c.page.size){b(".owl-next").addClass(d);b(".owl-prev").addClass(d);return}if(c.item.count-c.item.index<=c.page.size)b(".owl-next").addClass(a);else b(".owl-next").removeClass(a);if(c.item.index==0)b(".owl-prev").addClass(a);else b(".owl-prev").removeClass(a)});b(e).on("skyscraperRendered",function(){c.trigger("resize.owl.carousel")})}}})}if(s&&s.length&&!Q.anbieterKontakt&&h>=O){Q.anbieterKontakt=true;b.ajax({type:"POST",url:q+"/InitAnbieterKontakt"+a,data:'{ estateguid: "'+g.EstateGuid+'" }',contentType:"application/json; charset=utf-8",success:function(a){if(a&&a.length){s.html(a).show();b(".js-showPhonenumbers").on("click",function(){var a=b(this).closest("form").get(0);if(a)a.action=String.Format(a.action,"IwAG.Expose.getInstance().ShowPhoneNumber")});bb()}}})}},Zb=function(a){e.open(IwAG.Vars.IWhost+"immobilien/jumptooda.aspx?id="+a+"&jumpbackto="+e.location.pathname)},K=function(c,a){if(document.URL.indexOf("/vorschau")>-1)return;if(!a)a=1;if(c=="imageSlide")if(a<=qb)return;else qb=a;else if(c=="scrolling")if(a<=sb)return;else sb=a;b.ajax({type:"POST",url:IwAG.Vars.IWhost+"_common/userprofileclient/userprofileclient.asmx/ExposeInteraction",data:'{ estateId:"'+g.EstateId+'", globalObjectKey: "'+g.GlobalObjectKey+'", exposeInteraction: "'+c+'", index: "'+a+'" }',contentType:"application/json; charset=utf-8",dataType:"json"})},Sb=function(a){return IwAG.Base&&IwAG.Base.getURLParam?IwAG.Base.getURLParam(e.location.href,a):""},Kb=function(){var a="";if(b("#cbPdfPreiseKosten").is(":checked"))a+="1";else a+="0";if(b("#cbPdfAusstattungsmerkmale").is(":checked"))a+="1";else a+="0";if(b("#cbPdfObjekttexte").is(":checked"))a+="1";else a+="0";if(b("#cbPdfLagebeschreibung").is(":checked"))a+="1";else a+="0";a+="1";if(b("#cbPdfBilder").is(":checked"))a+="1";else a+="0";if(b("#cbPdfNotizen").is(":checked"))a+="1";else a+="0";if(b("#cbPdfLinkerRand").is(":checked"))a+="1";else a+="0";return a},Ob=function(c){var a=c.get(0);if(typeof a.selectionStart=="number")if(a.value.length)a.selectionStart=a.selectionEnd=a.value.length;else c.focus();else if(a.createTextRange){a.focus();var b=a.createTextRange();b.collapse(false);b.select()}else{var d=a.value;a.value=d}},Lb=function(){if(!t.length)return;var a=t.children();ob=setTimeout(Mb,3e4);a.on("click",function(){N.DisplayWithPreset("visit");b("#WantToView").attr("checked","checked")});a.find(".js-Close").off().on("click",function(a){b.cancelEvent(a);a.preventDefault();a.stopPropagation();var c={event_action:"click",event_category:"button-intern",event_label:"expose_notification_contact_close",event_type:"click"};utag.link(c);lb();b.ajax({url:t.data("updateurl"),method:"POST"})})},Mb=function(){t.children().addClass("active")},lb=function(){clearTimeout(ob);t.children().removeClass("active")},Db=function(){IwAG.Base.getInstance().asyncHtmlGet({DomElementId:"formNotiz",data:"estateguid="+g.EstateGuid,action:"getnotiz",controller:"expose"})},ib=function(a){if(!a)a="kontakt_phone";if(typeof a==="string")a=[a];if(typeof f==="undefined"||f==null)f={page_type:"thankyoupage",product_order_id:"IW_"+Math.floor(+new Date/1e3)+"_"+jQuery.guid,product_category:[],product_name:[],product_variant:[],product_id:[],product_price:[],product_quantity:[],kontakt_phone:1,transaction:1,object_state:[],object_city:[],object_district:[],object_federalstate:[],object_marketingtype:[],object_objektart:[],object_objektart_sub:[],object_gok:[]};for(var b=0,c=a.length;b<c;b++)Rb(a[b]);utag.view(f);f=null},Rb=function(a){f.product_variant.push(a);f.product_name.push("kontakt");f.product_id.push("500");f.product_price.push(0);f.product_quantity.push(1);utag_data.object_gok&&utag_data.object_gok.length>0&&f.object_gok.push(utag_data.object_gok[0]);utag_data.object_state&&utag_data.object_state.length>0&&f.object_state.push(utag_data.object_state[0]);utag_data.object_city&&utag_data.object_city.length>0&&f.object_city.push(utag_data.object_city[0]);utag_data.object_district&&utag_data.object_district.length>0&&f.object_district.push(utag_data.object_district[0]);utag_data.object_federalstate&&utag_data.object_federalstate.length>0&&f.object_federalstate.push(utag_data.object_federalstate[0]);utag_data.object_marketingtype&&utag_data.object_marketingtype.length>0&&f.object_marketingtype.push(utag_data.object_marketingtype[0]);utag_data.object_objektart&&utag_data.object_objektart.length>0&&f.object_objektart.push(utag_data.object_objektart[0]);if(utag_data.object_objektart_sub&&utag_data.object_objektart_sub.length>0)if(typeof utag_data.object_objektart_sub==="string")f.object_objektart_sub.push(utag_data.object_objektart_sub);else f.object_objektart_sub.push(utag_data.object_objektart_sub[0]);utag_data.product_category&&utag_data.product_category.length>0&&f.product_category.push(utag_data.product_category[0])};return{Initialize:function(a){return hb(a)},InitScrollTop:function(){if(h>0)return;h=b(document).scrollTop()-1;P()},SetOptions:function(a){!c&&hb();if(!a)return;if(a.StatusbarSlideActivate===false){Z=false;c.hide()}},ResizeHandler:function(a){m=IwAG.Base.getInstance().isSDevice();fb=IwAG.Base.getInstance().isMDevice();nb();P(a)},ScrollingHandler:function(a){return P(a)},ScrollingActive:function(){return ab!=null},DisplayContact:function(a){b.cancelEvent(a);return G($divContact,false)},DisplaySectionContact:function(b,a){return G(b,a)},DisplayContactNoLocation:function(a){b.cancelEvent(a);N.DisplayWithPreset("nolocation")},SetContactText:function(a){N.DisplayWithPreset(a)},highlightStadtteil:function(d,c){var a=b("#"+d);if(!a.length&&c!="")a=b("#"+c);a.attr("class","current")},noteSwitchLogin:function(){var a=b.cookie("IwAnnotationCookie");return!a?false:a.indexOf("clientData")==0?false:true},OpenODA:function(b,a){return Zb(b,a)},LogTelefonButton:function(){return E()},TrackDirectCall:function(){return E()},ControlHeight:function(){return c.height()},ScrollToElement:function(a,b,c){n(a,b,c)},ContactHandler:function(a){b("#contactLoader").addClass(d);b("#formKontaktanfrage").css("opacity",1);b("#formKontaktanfrage .js-contactError").remove();if(!a.status||a.status==200){Db();b("#ShowContactFormAfterSuccess")&&b("#ShowContactFormAfterSuccess").val(false);return}else zb.prev().before('<div class="message_error js-contactError margin_bottom_10">Es ist ein Fehler beim Versenden Ihrer Kontaktanfrage aufgetreten. Bitte versuchen Sie es in ein paar Minuten erneut.</div>')},printExpose:function(a,b){if(b==="custom")b=Kb();if(a)a=unescape(a);K("print");if(a.substr(0,1)==="/")a=a.substr(1);if(b){if(a.indexOf("?")>-1)a+="&";else a+="?";a+="version="+b}e.location=IwAG.Vars.IWhost+a},trackExposeInteraction:function(a,b){return K(a,b)},hideNotificationPopup:function(){return lb()},ReloadNotes:function(){Db()},HasNotes:function(){return b("#formNotiz",k).data("hasnotes")},ShowPhoneNumber:function(i){var g=Math.max(document.documentElement.clientHeight,e.innerHeight||0),d=i.match(/<span/g),a=(d?d.length:0)*25,h=a+25,f=0;if(m)a+=c.height();if(s.length)f=s.get(0).getBoundingClientRect();g-f<a&&b("html, body").stop().animate({scrollTop:"+="+h+"px"},300)},DoTealiumTelefonkontaktTrackingSizeS:function(a){ib(a)},Youtube:function(){return Jb}}};return{getInstance:function(){if(!a)a=new b(d,c);return a}}}(IwAG.$,window);(function(b,a){b(function(){if(IwAG.Vars.exposeConfig)IwAG.Vars.exposeConfig.initializeAllBySelf=true;IwAG.Expose.getInstance().Initialize(IwAG.Vars.exposeConfig)});b(a).load(function(){b(a).scroll(IwAG.Expose.getInstance().ScrollingHandler).resize(IwAG.Expose.getInstance().ResizeHandler);IwAG.Expose.getInstance().InitScrollTop()});a.onYouTubeIframeAPIReady=function(){IwAG.Vars.youtube&&IwAG.Expose.getInstance().Youtube().YoutubePlayerApiReady()}})(IwAG.$,window);IwAG.Expose.Image=function(e,c,d){var a=null,b=function(d,N,v){var j=0,C=0,e=0,s=true,B=false,i=[],b={marginItems:5,transitionSpeed:500,activeItemClass:"activeCarouselItem",hiddenClass:"inactive",imageData:[]},u=false,f=null,c=null,A=null,g=null,h=null,G=null,r=null,O=function(e){f=d("#carouselContainer");c=d(".carouselItems",f);A=d(".thumbContainer",f);g=d("#previousImage",f);h=d("#nextImage",f);G=d("#furtherImages");r=d("#imagesArea");b=d.extend(b,e);j=f.outerWidth();C=f.height();var a=b.imageData.length;if(a>0){J(a);IwAG.Expose.Image.Thumbnails.getInstance().Initialize(b);p(t(0),false);M(a);IwAG.Expose.Image.Slideshow&&IwAG.Expose.Image.Slideshow.getInstance().Initialize(b);IwAG.Expose.Image.Lightbox&&IwAG.Expose.Image.Lightbox.getInstance().Init(b)}},J=function(a){for(var f=null,e=0,j=[],r=a>1?"Bild {1} von {2}{0}":"{0}",m="",q=null,p='<div class="carousel-item" data-index="{0}">                                             {1}  <img src="/App_Themes/MID_0/images/misc/clear.gif" data-src="{2}"/>                                             <div class="caption js-caption">{3}</div>                                         </div>',n=function(e,g){j=b.imageData[e].caption.split(" ");if(a>1&&j.length==2&&j[0]=="Bild"&&!isNaN(j[1]))m=String.Format(r,"",e+1,a);else m=String.Format(r,(a>1?": ":"")+b.imageData[e].caption,e+1,a);if(a==1&&d("#Flag").length){d("#Flag").hide();f=d(String.Format(p,g,'<span class="iw_flag"></span>',b.imageData[e].srcImageStage,m))}else f=d(String.Format(p,g,"",b.imageData[e].srcImageStage,m));i.push(f);if(g==0){q=f;c.append(f);return}if(s(a,g)){o(f);q.before(f)}else c.append(f)},s=function(a,b){return a<=3&&b<a-1?false:a>3&&b<a-2?false:true};e<a;e++)n(e,e);if(a==2)for(e=0;e<4;e++)n(e%2,e+a);else if(a>1&&a<5)for(e=0;e<a;e++)n(e,e+a);if(a>1){g.on("click",k);h.on("click",l)}else{g.addClass(b.hiddenClass);h.addClass(b.hiddenClass)}},M=function(b){b>1&&d(N).keydown(function(a){if(!d(a.target).is("input,textarea")&&!a.metaKey&&!a.ctrlKey)switch(a.keyCode){case 37:k();break;case 39:l()}});I();d(v).on("resize",q).on("skyscraperRendered",q);A.on("hideStage",function(){g.hide();h.hide();a.HideImages();r.hide()}).on("showBilder",function(){g.show();h.show();a.ShowImages();r.show()})},q=function(){j=f.outerWidth();C=f.height();if(!s)return;b.slideShow&&IwAG.Expose.Image.Slideshow&&IwAG.Expose.Image.Slideshow.getInstance().Reset();IwAG.Expose.Image.Thumbnails&&IwAG.Expose.Image.Thumbnails.getInstance().Update(e);x();var a=function(){var b=t(e);if(!b||!b.width())v.setTimeout(a,10);else c.css({left:m(b)})};a()},I=function(){if(i.length<2||!c.hammer)return;var a=0;c.hammer().on("panstart",function(b){if(b.gesture.pointerType==="mouse")return;a=c.offset().left;b.stopPropagation();b.preventDefault();return false}).on("panend",function(e){if(e.gesture.pointerType==="mouse")return;u=true;setTimeout(function(){u=false},250);if(Math.abs(e.gesture.deltaX)>d(".activeCarouselItem",f).width()/5||e.gesture.velocityX!==0&&Math.abs(e.gesture.velocityX)>.7)if(e.gesture.deltaX>0)k();else l();else c.stop(true,true).animate({left:a},b.transitionSpeed);e.stopPropagation();e.preventDefault();return false}).on("pan",function(b){if(b.gesture.pointerType==="mouse")return;var d=a+b.gesture.deltaX;c.css("left",d+"px");b.stopPropagation();b.preventDefault();return false})},t=function(a){return i.length>a?i[a]:null},p=function(a,h,f){var g=d("."+b.activeItemClass,c);e=a.data("index");o(a,function(){if(h)L({left:m(a)},function(){w(a,g);f&&f()});else{y();w(a,g);f&&f()}if(e>=b.imageData.length)e=e%b.imageData.length;IwAG.Expose.Image.Thumbnails.getInstance().SetCurrent(e)});if(1<i.length){H(a);K(a)}},o=function(f,h){if(!f)return;var b=f.find("img");if(!b.length)return;var k=b.data("src"),a=b.get(0),j=f.find(".js-caption"),l=f.outerWidth(false),g=t(e),i=function(a){if(a.srcElement||a.currentTarget)a=a.srcElement||a.currentTarget;a.onload=null;d(a).css({width:"auto"});d(j).css({bottom:"6px"});f.prepend(a);x();g&&c.css({left:m(g)});h&&h(a)};if(!k||a&&a.naturalWidth>50){h&&h(a);return}l=b.outerWidth(false);b.remove();g&&c.css({left:m(g)});a=new Image;a.onload=i;a.src=k;a.alt=j.text();a.style.width=0;a.complete&&i(a)},m=function(a){if(!a)return j/2-b.marginItems;var d=F(a.prev()),f=a.position().left+b.marginItems,c=a.outerWidth(false)/2,e=j/2-c;return j/2-(d+a.width()/2+b.marginItems)},F=function(a){for(var c=0,d=b.marginItems;a&&a.length;){c+=a.width()+d;a=a.prev()}return c},z=function(){var a=c.children(":last"),b=a.outerWidth(true);c.prepend(a.detach()).css("left","-="+b);return a},D=function(){var a=c.children(":first-child"),b=a.outerWidth(true);c.append(a.detach()).css("left","+="+b);return a},x=function(){if(!c.is(":visible"))return;var a=c.children(),d=0,e=a.length;while(e--)d+=a.eq(e).width()+2*b.marginItems;c.css({width:d+"px"})},l=function(){var a=d("."+b.activeItemClass,c),f=a.next();p(f,true);IwAG.Expose.getInstance().trackExposeInteraction("imageSlide",e+1)},k=function(){var f=d("."+b.activeItemClass,c),a=f.prev();p(a,true);IwAG.Expose.getInstance().trackExposeInteraction("imageSlide",e+1)},L=function(d,a){c.clearQueue();c.redraw&&c.redraw();B=true;c.stop(true,true).animate(d,b.transitionSpeed,function(b){a(b);B=false});y()},y=function(){var b=i.length,a=e;a=a>=b?a-b:e;IwAG.Expose.Image.Thumbnails.getInstance().SetCurrent(a)},w=function(a,d){d.removeClass(b.activeItemClass);a.off().addClass(b.activeItemClass);var c=function(){if(IwAG.Expose.Image.Lightbox){IwAG.Expose.Image.Lightbox.getInstance().OpenGallery(e);return true}return false};if(i.length==1){a.on("click",function(){c()});return}E(a);a.prevAll().off().on("click",k);a.nextAll().off().on("click",l);a.on("click",function(a){if(u)return;if(c())return;a=a||v.event;var b=a.target||a.srcElement,f=b.getBoundingClientRect(),d=a.clientX-f.left,e=b.offsetWidth;if(d<e/2)k();else l()})},E=function(g){var f=g||d("."+b.activeItemClass,c),e=f.prevAll().length,a=2;while(e>a){n(f,true,a);D();e--}while(e<a){n(f,false,a);z();e++}},H=function(a,b){n(a,false,b)},K=function(a,b){n(a,true,b)},n=function(e,f,b){b=b?b:1;var a=f?e.nextAll().eq(b-1):e.prevAll().eq(b-1);if(!a.length)a=d("[data-index="+Number(e.data("index")+(f?1:-1)*b)+"]",c);o(a);a=f?a.next():a.prev();o(a)};return{Initialize:function(a){return O(a)},MoveLastToBegining:function(){return z()},MoveFirstToEnd:function(){return D()},ShowItem:function(a,f){if(typeof a!="undefined")e=a;g.removeClass(b.hiddenClass);h.removeClass(b.hiddenClass);c.removeClass(b.hiddenClass);p(d("[data-index="+e+"]",c),f);IwAG.Expose.getInstance().trackExposeInteraction("imageSlide",e+1)},HideImages:function(){s=false;g.addClass(b.hiddenClass);h.addClass(b.hiddenClass);c.addClass(b.hiddenClass)},ShowImages:function(a){s=true;if(typeof a!="undefined")e=a;if(b.imageData.length>1){g.removeClass(b.hiddenClass);h.removeClass(b.hiddenClass)}c.removeClass(b.hiddenClass);q()},GetCurrentIndex:function(){return e}}};return{getInstance:function(){if(!a)a=b(e,c,d);return a}}}(IwAG.$,document,window);(function(a){a.fn.redraw=function(){return a(this).each(function(){var b=this.offsetHeight,c=a(this).position().left})}})(IwAG.$);var MediaBar=function(c,b,a){this.hiddenCss="inactive";this.activeCss="current";this.Config=c;this.ShowButton=b;this.Control=a;this.MediaContainer=a.parent().find("#MediaContainer");this.TabBilder=a.find(".js-tabBilder");this.TabVideo=a.find(".js-tabVideos");this.TabPanorama=a.find(".js-tab360Grad");this.TabLiveStream=a.find(".js-tabLiveStream");this.ContainerBilder=a.find("#thumbnails-Bilder");this.ContainerVideo=a.find("#thumbnails-Videos");this.ContainerPanorama=a.find("#thumbnails-360Grad");this.BilderActive=true;this.VideoActive=false;this.PanoramaActive=false;this.LiveStreamActive=false;this.ThumbsVisible=false;this.VideoIsPlaying=false;this.IsSDevice=false;this.hasLiveStream=false;this.TabMediaArray=[this.TabBilder,this.TabVideo,this.TabPanorama];this.Initialize()};(function(a,b,c){a.prototype.Initialize=function(){var a=this;a.IsSDevice=IwAG.Vars.DeviceType==="mobile";a.ShowButton.on("click",{control:a},a.OnShowButtonClick);a.TabBilder.on("click",{control:a,bilder:true},a.OnTabClick);a.TabPanorama.on("click",{control:a,panorama:true},a.OnTabClick);a.TabVideo.on("click",{control:a,video:true},a.OnTabClick);a.TabLiveStream.on("click",{control:a,liveStream:true},a.OnTabClick);a.Control.on("startVideoFromStage",function(){a.PlayVideo({data:{trigger:true}})}).on("stopVideoFromStage",function(){a.StopVideo({data:{trigger:true}})}).on("currentState",function(d,c){a.Config.liveConfig.currentState=c;if(c==="stopped"){a.TabLiveStream.addClass(a.hiddenCss);for(var b=0;b<a.TabMediaArray.length;b++)if(a.TabMediaArray[b].length){a.TabMediaArray[b].click();break}}});if(a.Config.liveConfig!=undefined)if(a.Config.liveConfig.startWithLiveStream){a.Config.startWithPanorama=false;a.Config.startSlideshow=false;a.hasLiveStream=true}if(a.Config.startSlideshow){a.ThumbsVisible=true;a.BilderActive=false;a.VideoActive=true;a.VideoIsPlaying=true}else if(a.Config.startWithPanorama){if(Object.keys&&Object.keys(a.Config.panorama.scenes).length>1)a.ThumbsVisible=true;a.BilderActive=false;a.VideoActive=false;a.PanoramaActive=true}else if(a.hasLiveStream){a.BilderActive=false;a.LiveStreamActive=true;a.ThumbsVisible=true}else{a.BilderActive=true;a.VideoActive=false;a.VideoIsPlaying=false}if(a.IsSDevice){a.ThumbsVisible=true;a.ShowButton.addClass(a.hiddenCss)}else a.SetShowButton();a.SetContainer();if(a.Config.startSlideshow)a.PlayVideo({data:{trigger:true,startPlaying:false}});else a.Config.startWithPanorama&&a.Control.trigger("hideStage").trigger("showPanorama");b(c).on("resize",function(){a.IsSDevice=IwAG.Base.getInstance().isSDevice();a.SetContainer()})};a.prototype.SetShowButton=function(){var a=this,b="Übersicht ausblenden",c="icon-camera",d="icon-close";if(!a.ThumbsVisible){c="icon-close",d="icon-camera";b="Übersicht: ";if(a.Config.imageData.length)b+=String.Format("{0} Bild{1}, ",a.Config.imageData.length,a.Config.imageData.length>1?"er":"");if(a.Config.liveConfig!=undefined&&a.Config.liveConfig.currentState!=="stopped")b+="LiveStream, ";if(a.Config.panorama)b+="360°-Ansicht, ";if(a.Config.slideShow)b+="Videoclip, "}b=b.replace(/, $/i,"");a.ShowButton.text(b).removeClass(c).addClass(d)};a.prototype.SetContainer=function(){var a=this;a.TabBilder.addClass(a.hiddenCss).removeClass(a.activeCss);a.TabPanorama.addClass(a.hiddenCss).removeClass(a.activeCss);a.TabVideo.addClass(a.hiddenCss).removeClass(a.activeCss);a.TabLiveStream.addClass(a.hiddenCss).removeClass(a.activeCss);a.ContainerBilder.addClass(a.hiddenCss);a.ContainerPanorama.addClass(a.hiddenCss);a.ContainerVideo.addClass(a.hiddenCss);if(a.ThumbsVisible||a.IsSDevice){a.TabPanorama.removeClass(a.hiddenCss);a.TabVideo.removeClass(a.hiddenCss);a.TabBilder.removeClass(a.hiddenCss);a.Config.liveConfig!=undefined&&a.Config.liveConfig.currentState!=="stopped"&&a.TabLiveStream.removeClass(a.hiddenCss);if(a.PanoramaActive){a.ContainerPanorama.removeClass(a.hiddenCss);a.TabPanorama.addClass(a.activeCss)}else if(a.VideoActive){a.ContainerVideo.removeClass(a.hiddenCss);a.TabVideo.addClass(a.activeCss)}else if(a.LiveStreamActive)a.TabLiveStream.addClass(a.activeCss);else{a.ContainerBilder.removeClass(a.hiddenCss);a.TabBilder.addClass(a.activeCss)}}};a.prototype.OnShowButtonClick=function(b){var a=b.data.control;if(a.ThumbsVisible)a.ThumbsVisible=false;else a.ThumbsVisible=true;a.SetShowButton();a.SetContainer();a.Control.trigger("showThumbs")};a.prototype.OnTabClick=function(d){var a=d.data.control,c="";a.MediaContainer.removeClass("livestream_wrapper");if(d.data.video){if(a.VideoIsPlaying)a.StopVideo();else a.PlayVideo();a.VideoActive=true;a.BilderActive=false;a.PanoramaActive=false;a.LiveStreamActive=false}else if(d.data.panorama){a.PanoramaActive=true;a.BilderActive=false;a.VideoActive=false;a.LiveStreamActive=false;a.StopVideo();b(".iw_flag").addClass(a.hiddenCss);c="showPanorama"}else if(d.data.liveStream){a.LiveStreamActive=true;a.BilderActive=false;a.PanoramaActive=false;a.VideoActive=false;a.StopVideo();c="showLiveStream"}else{a.BilderActive=true;a.LiveStreamActive=false;a.PanoramaActive=false;a.VideoActive=false;a.StopVideo();b(".iw_flag").removeClass(a.hiddenCss);c="showBilder"}a.SetShowButton();a.SetContainer();c&&a.Control.trigger("hideStage").trigger(c)};a.prototype.PlayVideo=function(a){var b=this,c=a?a.data.trigger:true;b.VideoIsPlaying=true;b.TabVideo.removeClass("icon-play").addClass("icon-pause");c&&b.Control.trigger("hideStage").trigger("playVideo",[a?a.data.startPlaying:true])};a.prototype.StopVideo=function(b){var a=this,c=b?b.data.trigger:true;a.VideoIsPlaying=false;a.TabVideo.removeClass("icon-pause").addClass("icon-play");c&&a.Control.trigger("stopVideo")}})(MediaBar,IwAG.$,window);IwAG.Expose.Image.Thumbnails=function(e,c,d){var a=null,b=function(d,A,u){var t=false,a={transitionSpeed:500,activeThumbnailClass:"activeThumb",hiddenClass:"display_none",imageData:[],thumbnailWidth:0,slideShow:false,startSlideshow:false,panorama:false},b=0,h=84,g=0,i=false,j=0,x=0,k=0,f=null,v=null,q=null,m=null,c=null,l=null,o=null,s=null,p=null,e=function(){var b=a.imageData.length,c=d(".thumbnail.icon_videoclip");if(c.length)b++;return b},G=(u.location.origin+u.location.pathname).replace(/\/vorschau/i,""),B=function(b){a=d.extend(a,b);f=d("#carouselContainer");v=d("#imagesArea",f);c=d("#thumbList",f);m=d(".thumbContainer",f);l=d("#previousPage",f);o=d("#nextPage",f);s=d("#thumbsButton",f);q=d("#slideshowArea",f);p=d("#thumbnails-Bilder",f);t=a.slideShow;if(e()>=1||t||a.panorama){e()>=1&&z(a.imageData);D()}else s.addClass(a.hiddenClass);d(u).on("resize",function(){n(false);z(a.imageData)})},D=function(){if(e()<2||!v.hammer)return;var a=0;m.hammer().on("panstart panend",function(){if(!i)return;a=/-?[0-9]*/.exec(c.css("margin-left"))[0]}).on("panend",function(){if(!i)return;if(a>0){c.animate({marginLeft:0},"fast");a=0}if(Math.abs(a)>h*e()-k){c.animate({marginLeft:h*e()*-1+k},"fast");a=h*e()*-1+k}}).on("pan",function(d){if(!i)return;var b=Number(a)+d.gesture.deltaX;c.css("margin-left",b+"px")}).on("showThumbs",function(){t=true;n(false)})},y=function(a){b=d(a.currentTarget).data("index");IwAG.Expose.Image.Slideshow&&IwAG.Expose.Image.Slideshow.getInstance().StopSlideShow();IwAG.Expose.Image.getInstance().ShowItem(b,true)},n=function(){!m&&B();s.removeClass(a.hiddenClass);x=c.parent().width();g=Math.floor(x/h);k=g*h;j=Math.floor(g/2);i=g<e();C();!q.is(":visible")&&w()},F=function(){if(b+1<=e()-g)b++;else b=0;r(b)},E=function(){if(b>0)b--;else b=e()-g;r(b)},w=function(){if(!m)return;if(IwAG.Base.getInstance().isSDevice()){p.addClass(a.hiddenClass);return}c.find(".thumbnail").removeClass(a.activeThumbnailClass).filter("[data-index="+b+"]").addClass(a.activeThumbnailClass);if(!i)return;var d=0;if(b>=e()-j)d=e()-g;if(b>=j)d=b-j;r(d)},r=function(d){c.redraw&&c.redraw();c.animate({marginLeft:-1*h*d+"px"},a.transitionSpeed/2);b=d},z=function(f){var e,b,h=f.length,d=0;if(IwAG.Base.getInstance().isSDevice()){p.addClass(a.hiddenClass);return}if(c.children().length>0)return;for(var g=A.createDocumentFragment();d<h;d++){e=A.createElement("div");e.className="thumbnail";e.setAttribute("data-index",d);b=new Image;b.src=f[d].srcThumbnail;b.alt=f[d].caption;b.title=f[d].caption;b.setAttribute("class","thumb");e.appendChild(b);g.appendChild(e);c.append(g)}c.append(g).find(".thumbnail").on("click",y);n()},C=function(){var b=e()*h;if(q.length){var f=d(".thumbnail.icon_videoclip");if(f.length)b+=Math.ceil(f.get(0).getBoundingClientRect().width)+20}if(i){l.removeClass(a.hiddenClass);o.removeClass(a.hiddenClass);l.off().on("click",E);o.off().on("click",F)}else{l.addClass(a.hiddenClass);o.addClass(a.hiddenClass);c.css({"margin-top":0,"margin-left":"auto","margin-bottom":0,"margin-right":"auto","padding-left":0})}c.css({width:Math.round(b)+"px"})};return{Initialize:function(a){return B(a)},Update:function(a){if(typeof a!="undefined")b=a;n()},SetCurrent:function(a){b=a;w()},RemoveThumbnail:function(a){c.find(".thumbnail").eq(a).remove();this.Update(a)},ThumbnailClick:function(a){y(a)}}};return{getInstance:function(){if(!a)a=new b(e,c,d);return a}}}(IwAG.$,document,window);IwAG.Expose=IwAG.Expose||{};IwAG.Expose.Image=IwAG.Expose.Image||{};IwAG.Expose.Image.Lightbox=function(e,b,d){var a=null,c=function(d,r,e){var c=null,b=null,g=null,a={cssFiles:["app_themes/GLOBAL_RWD/plugin/photoswipe/photoswipe.css","app_themes/GLOBAL_RWD/plugin/photoswipe/default-skin/default-skin.css"],sourceFiles:{live:["_scripts/mvc/_plugin/photoswipe.min.js","_scripts/mvc/_plugin/photoswipe-ui-default.min.js"],dev:["_scripts/mvc/_plugin/photoswipe.js","_scripts/mvc/_plugin/photoswipe-ui-default.js"]},imageData:[]},h=false,f=false,i=null,q=function(c){if(c.imageData&&c.imageData.length)a.imageData=c.imageData;b=d(".pswp");g=d("#pswp_preloader");d(".pswp__button--close",g).on("click",function(){g.addClass("display_none");f=true})},l=function(a){if(!b.length)return;f=false;p();a=Number(a)||0;g.css({height:e.innerHeight+"px",width:e.innerWidth+"px"}).removeClass("display_none");b.removeClass("display_none");n(function(){m(function(){b.show();c=new PhotoSwipe(b.get(0),PhotoSwipeUI_Default,o(),{focus:false,maxSpreadZoom:3,index:a,barsSize:{top:0,bottom:0},addCaptionHTMLFn:j,shareEl:false});c.listen("destroy",function(){b.hide()});c.listen("afterChange",function(){var a=d(".pswp__caption",b);c.ui.updateIndexIndicator();j(c.currItem,a.get(0));a.removeClass("hidden");if(i){e.clearTimeout(i);i=null}i=e.setTimeout(function(){a.addClass("hidden")},3e3)});c.init();e.setTimeout(function(){g.addClass("display_none")},400);!IwAG.Base.getInstance().isLDevice()&&e.setTimeout(function(){c.ui.hideControls()},3e3)})});b.find("#js-button_right").on("click",function(b){var a=d(b.target);!a.is(".pswp__button")&&c.next()});b.find("#js-button_left").on("click",function(b){var a=d(b.target);!a.is(".pswp__button")&&c.prev()})},p=function(){if(h||f)return;var e=a.cssFiles.length,c=0,b=null;while(c<e){b=d("<link>");d("head").append(b);b.attr({rel:"stylesheet",type:"text/css",href:IwAG.Vars.IWMediahost+a.cssFiles[c]});c++}},n=function(b){if(f)return;if(h){b&&b();return}for(var g=e.testsystem?a.sourceFiles.dev:a.sourceFiles.live,j=g.length,i=[],c=0;c<j;c++)i.push(jQuery.ajax({url:IwAG.Vars.IWMediahost+g[c],dataType:"script",cache:true}));d.when.apply(null,i).then(function(){b&&b()})},m=function(c){if(f)return;if(h){c&&c();return}for(var d=a.imageData.length,e=0,b=null,i=function(){if(h||f)return;for(var b=0;b<d;b++)if(!a.imageData[b].width||!a.imageData[b].height)return;h=true;c&&c()},g=function(b){b=b&&b.width?b:this;if(a.imageData[b.index]!=null){a.imageData[b.index].width=b.width;a.imageData[b.index].height=b.height}i(b)},j=function(b){b=b&&typeof b.width!="undefined"?b:this;for(var c=0;c<d;c++)if(a.imageData[c].srcImageStage===b.src){a.imageData.remove(a.imageData[c]);d=a.imageData.length;break}i(b)};e<d;e++){b=new Image;b.index=e;b.onload=g;b.onerror=j;b.src=a.imageData[e].srcImageStage;b.complete&&g(b)}},o=function(){for(var c=[],b=0,d=a.imageData.length;b<d;b++)c.push({src:k(a.imageData[b].srcImageStage),title:a.imageData[b].caption,w:a.imageData[b].width,h:a.imageData[b].height});return c},k=function(a){if(a.indexOf("600_")<0)if(a.indexOf("http:")>-1){a=a.replace("http://","");var b=a.split("/");if(b.length==6)b[5]="600_"+b[5];a="http://"+b.join("/")}else if(a.indexOf("https:")>-1){a=a.replace("https://","");var b=a.split("/");if(b.length==6)b[5]="600_"+b[5];a="https://"+b.join("/")}return a},j=function(b,a){if(!b.title){a.children[0].innerHTML="";return false}a.children[0].innerHTML=b.title;return true};return{Init:function(a){q(a)},OpenGallery:function(a){l(a)}}};return{getInstance:function(){if(!a)a=new c(e,b,d);return a}}}(IwAG.$,document,window);IwAG.Weiterempfehlen=function(c){var a=null,b=function(c){var n='<label class="iw_tag iw_left margin_right_10 margin_bottom_10">{0}<span class="js-tagClose icon-close"></span><input type="hidden" name="ReceiverMails" value="{0}"></label>',d=null,a=null,b=null,h=null,f=null,p=null,l=function(){IwAG.Base.getInstance().addAsyncLoaded(g);if(b.data("validator"))b.data("validator").settings.onkeyup=false;c.validator.addMethod("emailSupplied",function(){for(var c=a.val().trim().length>0||d.children().length>0,b=a.next();;){if(b.hasClass("field-validation-error")||b.length==0)break;b=b.next()}if(b.length>0)if(!c)b.removeClass("inactive");else b.addClass("inactive");return c},"Bitte geben Sie mindestens einen Empfänger an.")},g=function(){h=c("#recommendForm");b=c("#formWeiterempfehlen",h);a=c("#inpEmailAddresEmpf",b);a.on("keydown blur",i);d=c("#divWeiterEmpfMultipleReciev",b);d.off().on("click",".js-tagClose",m);f=c("#aSubmitRecommend",b);f.off().on("click",function(){e();b.submit();return false})},j=function(){if(!b||!b.data("validator"))return;var a=b.data("validator").elements().filter("#inpEmailAddresEmpf");a.length>0&&!a.rules().emailSupplied&&a.rules("add",{emailSupplied:true})},i=function(b){if(b.which===9||b.which===13||b.which===188||b.type==="blur"){var c=e();if(c.isValid&&b.type==="keydown"){a.focus();b.stopPropagation();return false}}return true},e=function(){var d=c.trim(a.val()),b={hasValue:d.length>0,isValid:false};if(b.hasValue){a.val(d);a.next("span.field-validation-error").remove();b.isValid=k();b.isValid&&o()}return b},o=function(){d.append(String.Format(n,a.val()));a.val("")},m=function(a){c(a.target).parent().remove()},k=function(){return b.data("validator").element(a)};return{Initialize:function(){return l()},InitFields:function(){return g()},ShowCallback:function(){j()}}};return{getInstance:function(){if(!a)a=new b(c);return a}}}(IwAG.$);(function(a){a(function(){IwAG.Weiterempfehlen.getInstance().Initialize()})})(IwAG.$);IwAG.Expose.EnergyCalculator=function(c){var a=null,b=function(b){var a=null,c=null,j=null,p=null,i=null,k=null,B=null,q=null,m=null,f=null,n=0,t="",g=0,C=0,d=0,e=null,o=null,r=null,s=null,u=null,l=null,D=function(){c=b("#aStromverbrauch");if(!c.length)return;a=b("#divStromverbrauch");c.one("click",function(){b.ajax({url:c.attr("data-target"),data:JSON.stringify(c.data("values")),method:"POST",contentType:"application/json; charset=utf-8",success:y});return false})},y=function(d){a.replaceWith(d);a=b("#divStromverbrauch");p=b(".js-CloseEnergy",a);j=b(".js-linktomicrosite",a);f=b("#inpEnergyArea",a);m=b("#inpEnergyPlz",a);k=b("#selEnergyPers",a);B=b("#hidRooms",a);q=b("#hidCity",a);u=a.attr("data-trackingParam");r=a.attr("data-anbieter").toLowerCase();s=q.val();o=j.attr("href");if(r==="enstroga")z();else{x();w()}h();j.bind("click",function(){h()});k.bind("change",h);f.bind("keyup",v).bind("keyup",h);p.bind("click",function(){c.removeClass("display_none");a.addClass("display_none");return false});c.off().on("click",function(){c.addClass("display_none");a.removeClass("display_none");return false});c.addClass("display_none");utag.link(c.data("tealium"));IwAG.Base.getInstance().initializeClickTracking()},w=function(){i=b("#divSwitchButtons a",a);e="strom";i.on("click",function(d){var c=b(this);if(c.attr("data-value")!==e){e=c.attr("data-value");i.filter('[data-value="'+e+'"]').removeClass("lightgray").addClass("ci_color");i.not('[data-value="'+e+'"]').removeClass("ci_color").addClass("lightgray");if(e==="gas")a.addClass("maxenGas");else a.removeClass("maxenGas")}h();d.stopPropagation();return false})},z=function(){l=function(){d=(5+C)*200+g*9+n*300;if(d>25e3)d=25e3;else if(d<1500)d=1500}},x=function(){l=function(){if(e==="strom")d=1600+300*n+9*g;else if(g<100)d=110*g;else d=100*g}},h=function(){A();l();b("#spEnergySum",a).length&&b("#spEnergySum",a).text(d);j.attr("href",String.Format(o,d,t,e,s))},A=function(){if(k.length)n=Number(k.val());if(m.length)t=m.val();if(!f.length)return;if(f.val().indexOf(",")>-1)g=Math.ceil(f.val().replace(",","."));else g=Number(f.val())},v=function(b){var a=f.val();if(a.indexOf(",")>-1)a=a.replace(",",".");if(isNaN(a)){f.val(a.substr(0,a.length-1).replace(".",","));b.stopPropagation();return false}};return{Init:function(){return D()}}};return{getInstance:function(){if(!a)a=new b(c);return a}}}(IwAG.$);(function(a){a(function(){IwAG.Expose.EnergyCalculator.getInstance().Init()})})(IwAG.$);IwAG.Expose=IwAG.Expose||{};IwAG.Expose.UmzugWerbung=function(a,b){var c=null,d=function(){var f=null,e=null,j=null,d=null,k=null,l=null,h=null,g=null,c={markupTarget:"",cssHide:"display_none",data:{}},o=function(b){c=a.extend(c,b);f=a(".js-umzugAdvertisementBox");e=a(".js-opener",f);j=a(".js-advertisementPlaceholder",f);if(f.data("settings"))c=a.extend(c,f.data("settings"));n()},n=function(){e.one("click",function(b){a.cancelEvent(b);e.children("span").removeClass(c.cssHide);a.ajax({method:"POST",url:c.markupTarget,data:c.data,success:function(b){e.addClass(c.cssHide);e.children("span").addClass(c.cssHide);d=a(b);l=a(".js-linktomicrosite",d),k=a(".js-CloseAdvertisement",d);g=a("#inpDestination",d);h=a("#inpTarget",d);j.replaceWith(d);m()}})});e.on("click",function(b){a.cancelEvent(b);e.addClass(c.cssHide);d&&d.removeClass(c.cssHide)})},m=function(){k.on("click",function(b){a.cancelEvent(b);e.removeClass(c.cssHide);d.addClass(c.cssHide)});l.on("click",i);g.on("keydown",function(a){if(a.keyCode===13)return i()});h.on("keydown",function(a){if(a.keyCode===13)return i()})},i=function(e){a.cancelEvent(e);var c=String.Format("{0}dienstleistungen/umzug/liste.aspx?beladeOrt={1}&entladeOrt={2}",IwAG.Vars.IWhost,b.encodeURI(g.val()),b.encodeURI(h.val()));try{var d=b.open(c);d.focus()}catch(e){b.location.href=c}};return{Initialize:function(a){return o(a)}}};return{getInstance:function(){if(!c)c=new d;return c}}}(IwAG.$,window);(function(a){a(function(){IwAG.Expose.UmzugWerbung.getInstance().Initialize()})})(IwAG.$);IwAG.Gesuche=IwAG.Gesuche||{};IwAG.Gesuche.SaveSuchauftrag=function(c){var a=null,b=function(a){var c=null,k=null,i=null,f=null,e=null,y=null,h=null,p=null,o=null,d=null,w=null,v=null,x=null,n=null,b=null,q=null,j=null,g=null,s=null,r=false,l="#modal_SuchauftragSpeichern",m=null,t=null,G=function(){c=a(l);k=a("a[id^=aSaveSuchauftrag]");i=a(".js-Publish",c);f=a(".js-createTempSaAccount",c);e=a(".js-tbEmail");y=a(".js-chkAgb");h=a(".js-hdnTempSaGuid");p=a(".js-hdnRegUrl");o=a(".js-hdnMediaId");d=a(".js-pnlEntry");w=a(".js-pnlSuccess");x=a(".js-pnlError");v=a(".js-headline");n=a(".js-ErrorEmail");q=a(".js-ErrorAgb");j=a(".js-ErrorGeneric");g=IwAG.$(".js-hdnnewsletter");s=IwAG.$(".js-chkNewsletter");b=a("#suchauftragLoader");m=k.data("query");t=i.attr("href");if(c.length==0){f=a(".js-createTempSaAccount");m=a(".js-saquery").val()}E()},E=function(){if(c.find(".js-Registration").length>0)k.off().on("click",function(b){a.cancelEvent(b);IwAG.Base.openModalDialog({modalID:l,persist:true})});else k.off().on("click",function(b){a.cancelEvent(b);D()});e.length>0&&e.keyup(function(a){if(a.keyCode==13){a.preventDefault();f.click();return false}});if(f.length>0)f.on("click",function(f){a.cancelEvent(f);if(r)return false;var c=/^[\w&-]+[\w./&+!#$%&'*+/=?^_`{|}~-]*@[\w0-9]+[\w0-9-.]*\.(?!\.)[\w-]+$/i;if(!e.val().length||e.val().length<1||!c.test(e.val()))n.show();else n.hide();if(y.is(":checked"))q.hide();else q.show();if(n.is(":visible")||q.is(":visible"))return false;if(s.is(":visible")&&s.is(":checked"))g.val("true");else g.val("false");r=true;if(b.length){b.removeClass("display_none");d.css({opacity:.2})}C(function(){if(b.length){b.addClass("display_none");d.css({opacity:1})}if(!h.val().length||h.val().length<1||!p.val().length||p.val().length<1||!o.val().length||o.val().length<1)j.show();else j.hide();if(j.is(":visible")==false){A(e.val(),h.val(),o.val());r=false}});return false})},u=function(e){i=a(".js-Publish",c);i.attr("href",String.Format(t,e.suchaufgtragGuid));var b="no_display",f=a(".jsError",c),d=a(".jsSuccess",c);if(!e.success){d.addClass(b);f.removeClass(b)}else{d.removeClass(b);f.addClass(b)}},D=function(){a.ajax({url:"/suchauftrag/suchauftrag/savesuchauftrag",type:"POST",data:{suchauftragsQuery:m},success:function(a){u(a);IwAG.Base.openModalDialog({modalID:l,persist:true})},error:function(){u(true);IwAG.Base.openModalDialog({modalID:l,persist:true})}})},C=function(a){var b={suchauftragsQuery:m};z("/suchauftrag/suchauftrag/savetempsuchauftrag",b,function(b){h.val(b.tempSuchauftragGuid);a!=null&&a!=undefined&&a()})},B=function(a){if(a.success){d.hide();w.show();v.hide();var b=[17];g.val()==="true"&&b.push(82);typeof utag!=="undefined"&&a.tealium&&a.tealium.length>0&&utag.view(jQuery.parseJSON(a.tealium))}else{d.hide();x.show()}},A=function(d,b,c){var a={email:d,tempSaGuid:b,mediaId:c,newsletter:g.val()};z(p.val(),a,B)},z=function(f,e,c){a.support.cors=true;if(b.length){b.removeClass("display_none");d.css({opacity:.2})}a.ajax({url:f,type:"POST",crossDomain:true,traditional:true,dataType:"json",data:e,success:function(a){if(b.length){b.addClass("display_none");d.css({opacity:1})}c(a)},error:function(){if(b.length){b.addClass("display_none");d.css({opacity:1})}return F(f,e,c)}})},F=function(d,c,b){a.ajax({url:d,type:"GET",dataType:"jsonp",crossDomain:true,traditional:true,jsonpCallback:"IwAG.Gesuche.SaveSuchauftrag.AuthHandler",data:c,success:b,error:function(c,b,a){console.log(a+" : "+b)}})};return{Initialize:function(){return G()}}};return{getInstance:function(){if(!a)a=b(c);return a},AuthHandler:function(){}}}(IwAG.$);(function(){IwAG.Base.getInstance().addAsyncLoaded(function(){IwAG.Gesuche.SaveSuchauftrag.getInstance().Initialize()})})(IwAG.$)