var __extends=this&&this.__extends||function(){var a=function(c,b){a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,a){b.__proto__=a}||function(c,a){for(var b in a)if(a.hasOwnProperty(b))c[b]=a[b]};return a(c,b)};return function(c,b){a(c,b);function d(){this.constructor=c}c.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d)}}(),IwAG;(function(a){var b;(function(c){var b=function(c){__extends(b,c);function b(){var a=c.call(this)||this;a._isInitialized=[];a._menusLoaded=[];a._fixedHeaderActive=true;a._fixedHeaderCssClass="position_fixed";a._staticHeaderCssClass="navigation_static";a._mmMenuInitialized=false;a._preventClick=false;return a}b.prototype.OnDocumentReady=function(e,a,b){var d=this;c.prototype.OnDocumentReady.call(this,e,a,b);this.$menuNav=this.Jq("#js-menu-nav");this.$menuElement=this.Jq(".js_ui-has_dropdown");this.InitOffCanvas();this.RegisterEvents();this.SetFixHeader();this.Jq(this.Wnd).on("disableFixedHeader",function(){d.DisableFixedHeader(true)})};b.prototype.DisableFixedHeader=function(a){this.Jq("#js_innerBody").addClass(this._staticHeaderCssClass);this._fixedHeaderActive=a!==true;this.SetFixHeader()};b.prototype.InitOffCanvas=function(){var b=this;if(this._mmMenuInitialized)return;if(!this.IsOffCanvasRequired())return;var c=this.Jq(".js-channelLink"),d=function(){if(c.length&&b._menusLoaded.length<c.length)return;b._mmMenuInitialized=true;var d={slidingSubmenus:false,onClick:{close:true,preventDefault:false,setSelected:true}},e={clone:true};b.Jq("#menu").mmenu(d,e);d.offCanvas={position:"right",zposition:"front"};b.Jq("#menu_myiw").mmenu(d,e);b.$mmMenu=a.$("#mm-menu");b.$mmMenu_myiw=a.$("#mm-menu_myiw");b.$mmMenu.on("opened.mm",function(){b.Jq("body").addClass(b._fixedHeaderCssClass)}).on("closing.mm",function(){b.Jq("body").removeClass(b._fixedHeaderCssClass)}).find(".js_ui-first_level").on("open.mm",function(c){var a=b.Jq(c.target).closest(".js_ui-has_dropdown").siblings(".mm-opened");a.length>0&&a.find(".mm-opened").addBack().removeClass("mm-opened")});b.$mmMenu_myiw.on("opened.mm",function(){b.Jq("body").addClass(b._fixedHeaderCssClass)}).on("closing.mm",function(){b.Jq("body").removeClass(b._fixedHeaderCssClass)});a.Base.getInstance().executeAsyncLoaded()};if(c.length)this.Jq(".js-channelLink").each(function(c,a){b.LoadMenu({data:{buildImmediatly:true,callback:d},target:a})});else d()};b.prototype.RegisterEvents=function(){var b=this;this.Jq(this.Wnd).on("resize",function(){b.InitOffCanvas()}).on("scroll",function(){b.SetFixHeader()});this.Jq(this.Wnd.document).bind("touchstart",function(){b._preventClick=true;b.$menuElement.removeClass("js_ui-hover");b.$menuElement.addClass("js_ui-no_hover")});this.$menuElement.children("div,nav").bind("touchstart",function(a){a.stopPropagation()});this.$menuElement.on("mouseover focus",{buildImmediatly:false},function(a){b.LoadMenu(a)});if(a.Vars.DeviceType=="desktop")this.Jq(this.Wnd).on("resize",function(){if(b._mmMenuInitialized){b.$mmMenu.trigger("close.mm");b.$mmMenu_myiw.trigger("close.mm")}});else this.Jq(this.Wnd).on("orientationchange",function(){if(b._mmMenuInitialized){b.$mmMenu.trigger("close.mm");b.$mmMenu_myiw.trigger("close.mm")}});this._currentChannel=this.Jq(".js_ui-first_level",this.$menuNav).data("highlight-main");this._currentSubChannel=this.Jq(".js_ui-first_level",this.$menuNav).data("highlight-sub");this.BindMenuEvents(null)};b.prototype.LoadMenu=function(e){var d=this,f=e&&this.Jq(e.target)||this.Jq('.js-channelLink[data-channel="'+this._currentChannel+'"]',this.$menuNav),c=null,h=null,b=null,j=new Date,i=e.data.buildImmediatly,g=e.data.callback;if(f.is("a"))c=f;else c=f.children("a.js-channelLink");if(!c.length)return;h=c.next("div");b=c.data("channel");if(!b||h.length||this._isInitialized.indexOf(b)>-1)return;this._isInitialized.push(b);this.Jq.ajax({type:"GET",cache:true,url:a.Vars.IWhost+"/mvcroot/home/GetMenu"+b,success:function(l){var h=d.Jq(l),f=function(){b==d._currentChannel&&d.SetHighlight(h);c.parent().append(h);d.BindMenuEvents(c.parent());d._menusLoaded.push(b);g&&g();a.Base.getInstance().executeAsyncLoaded();a.Base.getInstance().initializeClickTracking()};if(i)f();else{var k=new Date,m=k-j,e=300-m;if(e<0)e=0;d.Wnd.setTimeout(f,e)}}})};b.prototype.SetHighlight=function(a){this.Jq('.js-highlight[data-highlight*="'+this._currentSubChannel+'"]',a).addClass("current")};b.prototype.SetFixHeader=function(){if(!this._fixedHeaderActive)return;if(this.Jq("#cookiebanner").length>0&&this.Wnd.pageYOffset>141||this.Jq("#cookiebanner").length==0&&this.Wnd.pageYOffset>99)this.$menuNav.addClass(this._fixedHeaderCssClass);else this.$menuNav.removeClass(this._fixedHeaderCssClass)};b.prototype.IsOffCanvasRequired=function(){return this.Jq(this.Wnd).width()<=980};b.prototype.BindMenuEvents=function(a){var b=this;if(!a)a=this.$menuElement;a.children("div,nav").bind("touchstart",function(a){a.stopPropagation()});a.children("a").on("click",function(a){if(b._preventClick){a.stopPropagation();a.preventDefault()}else setTimeout(function(){},300)}).off("touchstart").on("touchstart",function(a){b.TouchstartEvent(a)})};b.prototype.TouchstartEvent=function(b){this.LoadMenu({data:{buildImmediatly:false},target:b.target});var a=this.Jq(b.target).parent(),c=!a.hasClass("js_ui-hover");this.$menuElement.removeClass("js_ui-hover");this.$menuElement.addClass("js_ui-no_hover");if(c){a.addClass("js_ui-hover");a.removeClass("js_ui-no_hover")}else{a.removeClass("js_ui-hover");a.addClass("js_ui-no_hover")}b.stopPropagation();b.preventDefault()};return b}(a.BaseClass);c.Default=b;a.Container.RegisterObserver(new b)})(b=a.Header||(a.Header={}))})(IwAG||(IwAG={}))